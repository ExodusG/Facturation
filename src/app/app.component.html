<table mat-table [dataSource]="data" class="mat-elevation-z8" multiTemplateDataRows>
  <ng-container matColumnDef="designation">
    <th mat-header-cell *matHeaderCellDef> <strong> Désignation </strong> </th>
    <td mat-cell *matCellDef="let groupe">
      <div class="designation-group">
        <span class="material-icons">expand_more</span>
        <p class="designation-text"> <strong>{{groupe.designation}}</strong></p>
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="qte">
    <th mat-header-cell *matHeaderCellDef> <strong>Qté</strong> </th>
    <td mat-cell *matCellDef="let groupe"> </td>
  </ng-container>
  <ng-container matColumnDef="unite">
    <th mat-header-cell *matHeaderCellDef> <strong>Unité</strong> </th>
    <td mat-cell *matCellDef="let groupe"> </td>
  </ng-container>
  <ng-container matColumnDef="pu">
    <th mat-header-cell *matHeaderCellDef> <strong>PU</strong> </th>
    <td mat-cell *matCellDef="let groupe"> </td>
  </ng-container>

  <ng-container matColumnDef="total">
    <th mat-header-cell *matHeaderCellDef> <strong>Total</strong> </th>
    <td mat-cell *matCellDef="let groupe">
      {{groupe.total | number:'1.2-3'}}
    </td>
  </ng-container>

  <ng-container matColumnDef="remove">
    <th mat-header-cell *matHeaderCellDef> <strong>Remove</strong> </th>
    <td mat-cell *matCellDef="let groupe">
      <button mat-button (click)="remove(groupe)" >DELETE ROW</button>
    </td>

  </ng-container>

  <ng-container matColumnDef="add">
    <th mat-header-cell *matHeaderCellDef> <strong>Add</strong> </th>
    <td mat-cell *matCellDef="let groupe">
      <button mat-button (click)="addSousGroupe(groupe)" >Add sous-groupes</button>
    </td>

  </ng-container>

  <ng-container matColumnDef="expandedDetail">
    <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
      <app-sous-groupe [sousGroupes]="element.sous_groupes" (sousGroupe)="deleteSousGroupe($event,element)"></app-sous-groupe>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  <tr mat-row *matRowDef="let row; columns: ['expandedDetail']"></tr>
</table>
<button mat-button (click)="addGroupe()" >Add groupe</button>
